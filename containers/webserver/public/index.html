<!DOCTYPE html>
<html lang="en" style="width: 1920px;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>UrbanPulse Innovations - Community Management</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/untitled.css">
    <!-- Plotly -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-providers@latest/leaflet-providers.js"></script>
    <!-- Leaflet Heatmap -->
    <script src="https://cdn.jsdelivr.net/npm/heatmapjs@2.0.2/heatmap.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-heatmap@1.0.0/leaflet-heatmap.js"></script>
    <style>
        html,
        body {
            padding: 0;
            margin: 0
        }
    </style>
    <!-- /map -->
</head>

<body id="page-top" style="width: 1920px;height: 1080px;">
    <div id="wrapper">
        <div class="d-flex flex-column" id="content-wrapper">
            <div id="content" style="width: 1920px;">
                <nav class="navbar navbar-light navbar-expand bg-white shadow mb-4 topbar static-top"
                    style="transform: translateX(-4px);width: 1920px;">
                    <div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle me-3"
                            id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
                        <form class="d-none d-sm-inline-block me-auto ms-md-3 my-2 my-md-0 mw-100 navbar-search">
                            <div class="input-group"></div>
                        </form>
                        <h1></h1>
                        <ul class="navbar-nav flex-nowrap ms-auto" style="transform: translateX(-316px);">
                            <li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link"
                                    aria-expanded="false" data-bs-toggle="dropdown" href="#"><i
                                        class="fas fa-search"></i></a>
                                <div class="dropdown-menu dropdown-menu-end p-3 animated--grow-in"
                                    aria-labelledby="searchDropdown">
                                    <form class="me-auto navbar-search w-100">
                                        <div class="input-group"><input class="bg-light form-control border-0 small"
                                                type="text" placeholder="Search for ...">
                                            <div class="input-group-append"><button class="btn btn-primary py-0"
                                                    type="button"><i class="fas fa-search"></i></button></div>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link"
                                        aria-expanded="false" data-bs-toggle="dropdown" href="#"></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
                                        <h6 class="dropdown-header">alerts center</h6><a
                                            class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-primary icon-circle"><i
                                                        class="fas fa-file-alt text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 12, 2019</span>
                                                <p>A new monthly report is ready to download!</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-success icon-circle"><i
                                                        class="fas fa-donate text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 7, 2019</span>
                                                <p>$290.29 has been deposited into your account!</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="me-3">
                                                <div class="bg-warning icon-circle"><i
                                                        class="fas fa-exclamation-triangle text-white"></i></div>
                                            </div>
                                            <div><span class="small text-gray-500">December 2, 2019</span>
                                                <p>Spending Alert: We've noticed unusually high spending for your
                                                    account.</p>
                                            </div>
                                        </a><a class="dropdown-item text-center small text-gray-500" href="#">Show All
                                            Alerts</a>
                                    </div>
                                </div>
                            </li>
                            <li class="nav-item dropdown no-arrow mx-1">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link"
                                        aria-expanded="false" data-bs-toggle="dropdown" href="#"></a>
                                    <div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
                                        <h6 class="dropdown-header">alerts center</h6><a
                                            class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle"
                                                    src="assets/img/avatars/avatar4.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Hi there! I am wondering if you can
                                                        help me with a problem I've been having.</span></div>
                                                <p class="small text-gray-500 mb-0">Emily Fowler - 58m</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle"
                                                    src="assets/img/avatars/avatar2.jpeg">
                                                <div class="status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>I have the photos that you ordered last
                                                        month!</span></div>
                                                <p class="small text-gray-500 mb-0">Jae Chun - 1d</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle"
                                                    src="assets/img/avatars/avatar3.jpeg">
                                                <div class="bg-warning status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Last month's report looks great, I am
                                                        very happy with the progress so far, keep up the good
                                                        work!</span></div>
                                                <p class="small text-gray-500 mb-0">Morgan Alvarez - 2d</p>
                                            </div>
                                        </a><a class="dropdown-item d-flex align-items-center" href="#">
                                            <div class="dropdown-list-image me-3"><img class="rounded-circle"
                                                    src="assets/img/avatars/avatar5.jpeg">
                                                <div class="bg-success status-indicator"></div>
                                            </div>
                                            <div class="fw-bold">
                                                <div class="text-truncate"><span>Am I a good boy? The reason I ask is
                                                        because someone told me that people say this to all dogs, even
                                                        if they aren't good...</span></div>
                                                <p class="small text-gray-500 mb-0">Chicken the Dog · 2w</p>
                                            </div>
                                        </a><a class="dropdown-item text-center small text-gray-500" href="#">Show All
                                            Alerts</a>
                                    </div>
                                </div>
                                <div class="shadow dropdown-list dropdown-menu dropdown-menu-end"
                                    aria-labelledby="alertsDropdown"></div>
                            </li>
                            <div class="d-none d-sm-block topbar-divider"
                                style="transform: translate(173px) translateX(675px);"></div>
                            <li class="nav-item dropdown no-arrow">
                                <div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link"
                                        aria-expanded="false" data-bs-toggle="dropdown" href="#"
                                        style="transform: translateX(-96px);"></a>
                                    <div class="dropdown-menu shadow dropdown-menu-end animated--grow-in"><a
                                            class="dropdown-item" href="#"><i
                                                class="fas fa-user fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Profile</a><a
                                            class="dropdown-item" href="#"><i
                                                class="fas fa-cogs fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Settings</a><a
                                            class="dropdown-item" href="#"><i
                                                class="fas fa-list fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Activity
                                            log</a>
                                        <div class="dropdown-divider"></div><a class="dropdown-item" href="#"><i
                                                class="fas fa-sign-out-alt fa-sm fa-fw me-2 text-gray-400"></i>&nbsp;Logout</a>
                                    </div>
                                </div>
                            </li>
                        </ul><i class="far fa-question-circle"
                            style="transform: translate(-465px) translateX(686px);"></i><i class="far fa-chart-bar"
                            style="transform: translate(-465px) translateX(208px);"></i><span
                            style="font-family: Lato, sans-serif;transform: translate(-465px) translateX(217px);">Analysis</span><span
                            style="font-family: Lato, sans-serif;transform: translate(-411px) translateX(-174px) translateY(0px);margin-right: 0px;padding-right: 0px;width: 300px;">Dispute
                            Forum</span><span
                            style="font-family: Lato, sans-serif;transform: translate(-192px) translateX(47px) translateY(0px);">Help</span><span
                            style="font-family: Lato, sans-serif;transform: translate(-192px) translateX(326px) translateY(0px);width: 350px;">—
                            UrbanPulse Innovations —</span><span
                            style="font-family: Lato, sans-serif;transform: translate(-385px) translateX(-385px) translateY(0px);width: 300px;">Accident
                            Report</span><i class="far fa-comments"
                            style="transform: translate(-596px) translateX(-1000px);"></i><i
                            class="fas fa-exclamation-triangle"
                            style="transform: translate(-481px) translateX(-635px);"></i>
                    </div>
                </nav>
                <div class="container-fluid">
                    <div class="d-sm-flex justify-content-between align-items-center mb-4"
                        style="transform: translateX(161px);">
                        <h3 class="text-dark mb-0" style="font-family: Lato;transform: translateX(562px);">Residential
                            Area Management System</h3>
                    </div>
                    <div class="btn-toolbar" style="transform: translateX(605px);padding-bottom: 20px;">
                        <div class="btn-group" role="group"><button class="btn btn-primary" type="button"
                                style="border-radius: 20px;background: #006d5b;border-right-color: #006d5b;transform: translateX(45px);">All</button>
                            <button class="btn btn-primary" type="button"
                                style="border-radius: 20px;transform: translate(60px);background: #006d5b;border-right-color: #006d5b;">Parking</button>
                            <button class="btn btn-primary" type="button"
                                style="border-radius: 20px;transform: translate(77px);background: #006d5b;border-right-color: #006d5b;">Patrol</button>
                        </div>
                        <div class="btn-group" role="group"
                            style="border-radius: 20px;transform: translate(11px);background: var(--bs-btn-hover-bg);color: var(--bs-orange);">
                            <button class="btn btn-primary" type="button"
                                style="border-radius: 20px;transform: translate(81px);background: #006d5b;border-right-color: #006d5b;">Garbage
                                stations</button>
                            <button class="btn btn-primary" type="button"
                                style="border-radius: 20px;transform: translate(94px);background: #006d5b;border-right-color: #006d5b;">Accidents</button><button
                                class="btn btn-primary" type="button"
                                style="border-radius: 20px;transform: translate(19px) translateX(90px);background: #006d5b;border-right-color: #006d5b;"
                                onclick="toggleResidents();">Residents</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <!-- map -->
                            <div id="map" style="height: 1000px; padding:0; margin:0;"></div>
                            <div id="graphs">
                                <div id="attentionPieChart"></div>
                                <div id="garbageStationGraph"></div>
                                <div id="parkedCarsGraph"></div>
                                <div id="patrolGraph"></div>
                                <div id="censusGraph"></div>
                            </div>
                            <!-- map -->
                            <div class="toast-container"></div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="bg-white sticky-footer">
                <div class="container my-auto">
                    <div class="text-center my-auto copyright"></div>
                </div>
            </footer>
        </div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
    </div>
    <div style="width: 300px;background: #b44d4d;"></div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/theme.js"></script>
    <!-- map -->
    <script>
        var baseLayer = L.tileLayer('https://{s}.tile.jawg.io/jawg-matrix/{z}/{x}/{y}{r}.png?access-token={accessToken}', {
            attribution: '<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            minZoom: 0,
            maxZoom: 22,
            subdomains: 'abcd',
            accessToken: 'hiemvifLIv1RNspPeW9qVBrmEVuXLYcXanYc9QDikBwVP3aJyuZ5KpexJyxZdjrz'
        })//.addTo(map)

        // Heatmap
        function rndHeatData() {
            var center = [31.24169, 121.49491];
            var data = [];
            for (i = 0; i < 500; i++) {
                rY = randomNumber(-0.2, 0.2);
                rX = randomNumber(-0.2, 0.2);
                coord = [center[0] + rY, center[1] + rX];
                count = randomNumber(0, 5);
                data.push({ lat: coord[0], lng: coord[1], count: count });
            }
            return data;
        }
        var testData = {
            max: 5,
            data: rndHeatData()
        };
        var cfg = {
            // radius should be small ONLY if scaleRadius is true (or small radius is intended)
            // if scaleRadius is false it will be the constant radius used in pixels
            "radius": 0.02,
            "maxOpacity": .15,
            // scales the radius based on map zoom
            "scaleRadius": true,
            // if set to false the heatmap uses the global maximum for colorization
            // if activated: uses the data maximum within the current map boundaries
            //   (there will always be a red spot with useLocalExtremas true)
            "useLocalExtrema": true,
            // which field name in your data represents the latitude - default "lat"
            latField: 'lat',
            // which field name in your data represents the longitude - default "lng"
            lngField: 'lng',
            // which field name in your data represents the data value - default "value"
            valueField: 'count'
        };
        var heatmapLayer = new HeatmapOverlay(cfg);
        heatmapLayer.setData(testData);

        var map = new L.Map('map', {
            center: new L.LatLng(31.2416, 121.49491),
            zoom: 14,
            layers: [baseLayer]//, heatmapLayer]
        });

        function addPoint(point) {
            var CustomIcon = L.Icon.extend({
                options: {
                    iconSize: [40, 42],
                    iconAnchor: [20, 0],
                }
            });
            var Icon = new CustomIcon({ iconUrl: point.icon })
            var marker = L.marker(point.coords, { icon: Icon }).addTo(map);

            marker.bindPopup("<b>" + point.title + "</b>" + point.text);
        }

        function randomNumber(min, max) {
            return Math.random() * (max - min) + min;
        }
        center = [31.24169, 121.49491];
        var points = [];
        function rndVideoFeed() {
            // pick random processed feed and load
            maxFeed = 5;
            feed = Math.floor(Math.random() * maxFeed)
            html = "<video src=\"videos-cv/" + feed + ".mp4\" loop nocontrols autoplay style=\"max-width: 265px; padding-left: 8px; padding-top: 5px;\"></video>"
            return html
        }

        function loadPointsAttention(json, num) {
            jsonc = [];
            for (let index = 0; index < num; index++) {
                jsonc.push(json[(Math.floor(Math.random() * json.length))])
            }
            jsonc.forEach(e => {
                coord = [e.coordinates.latitude, e.coordinates.longitude];
                icon = "img/accident3.png"
                title = "Accident Reported"
                text = "<p><b>Time:</b> " + e.timestamp + "<br />"
                text += "<b>Emergency Contact:</b> " + e.emergencyContact + "<br />"
                text += "<b>Emergency Type:</b> " + e.emergencyType + "<br />"
                text += "<b>Address:</b> " + e.address + "<br />"
                text += "<b>Note:</b> " + e.note + "</p>"

                points.push({ "coords": coord, "icon": icon, "title": title, "text": text });
            });
        }
        function loadPointsGarbage(json, num) {
            jsonc = [];
            for (let index = 0; index < num; index++) {
                jsonc.push(json[(Math.floor(Math.random() * json.length))])
            }
            jsonc.forEach(e => {
                coord = [e.coordinates.latitude, e.coordinates.longitude];
                icon = "img/trash3.png"
                title = "Garbage Collection Station"
                stats = ["Empty", "20% Full", "40% Full", "60% Full", "80% Full", "100% Full"];
                status = stats[(Math.floor(Math.random() * stats.length))];
                text = "<p><b>Time:</b> " + e.timestamp + "<br />"
                text += "<b>Status:</b> " + status + "<br />";
                text += "<b>Address:</b> " + e.address + "<br />"
                text += "<b>Person in Charge:</b> " + e.personInCharge + "</p>";

                points.push({ "coords": coord, "icon": icon, "title": title, "text": text });
            });
        }
        function loadPointsParking(json, num) {
            jsonc = [];
            for (let index = 0; index < num; index++) {
                jsonc.push(json[(Math.floor(Math.random() * json.length))])
            }
            jsonc.forEach(e => {
                coord = [e.coordinates.latitude, e.coordinates.longitude];
                icon = "img/parking3.png"
                title = "Parking Live Feed"
                text = "<p><b>Number of Cars:</b> " + e.numberOfCars + "<br />"
                text += "<b>Address:</b> " + e.address + "<br />"
                text += rndVideoFeed() + "</p>";

                points.push({ "coords": coord, "icon": icon, "title": title, "text": text });
            });
        }
        function loadPointsPatrol(json, num) {
            jsonc = [];
            for (let index = 0; index < num; index++) {
                jsonc.push(json[(Math.floor(Math.random() * json.length))])
            }
            jsonc.forEach(e => {
                coord = [e.coordinates.latitude, e.coordinates.longitude];
                icon = "img/patrol3.png"
                title = "Police Patrol"
                text = "<p><b>Time:</b> " + e.timestamp + "<br />"
                text += "<b>Current Location: </b>" + e.address + "<br>"
                text += "<b>Officer Contact:</b> " + e.officerContact + "</p>"

                points.push({ "coords": coord, "icon": icon, "title": title, "text": text });
            });
        }

        points = [];

        function syncGet(url) {
            const request = new XMLHttpRequest();
            request.open("GET", url, false); // `false` makes the request synchronous
            request.send(null);

            if (request.status === 200) {
                return JSON.parse(request.responseText);
            }

        }

        num = 8
        json = syncGet("json/fake_attention_data.json")
        loadPointsAttention(json, num)
        json = syncGet("json/fake_garbage_station_data.json")
        loadPointsGarbage(json, num)
        json = syncGet("json/fake_parked_cars_data.json")
        loadPointsParking(json, num)
        json = syncGet("json/fake_patrol_data.json")
        loadPointsPatrol(json, num)

        points.forEach((point) => {
            addPoint(point);
        });

        var residentsShow = false//true;
        function toggleResidents() {
            if (residentsShow == true) {
                map.removeLayer(heatmapLayer)
            } else {
                map.addLayer(heatmapLayer)
            }
            residentsShow = !residentsShow;
        }
    </script>
    <script>
        // Helper function to aggregate stations by hour
        function aggregateStationsByHour(timestamps) {
            var stationsByHour = {};

            timestamps.forEach(timestamp => {
                var hour = timestamp.getHours();
                stationsByHour[hour] = (stationsByHour[hour] || 0) + 1;
            });

            return stationsByHour;
        }

        function loadJSON(filename, callback) {
            var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            xobj.open('GET', filename, true);
            xobj.onreadystatechange = function () {
                if (xobj.readyState == 4 && xobj.status == "200") {
                    callback(xobj.responseText);
                }
            };
            xobj.send(null);
        }

        function createGraphs() {
            // Garbage Station Data Analysis and Graph Creation
            loadJSON('./json/fake_garbage_station_data.json', function (response) {
                var garbageStationData = JSON.parse(response);

                // Extracting timestamps and statuses
                var timestamps = garbageStationData.map(item => new Date(item.timestamp));
                var statuses = garbageStationData.map(item => item.status);

                // Grouping stations by status (Full/Normal/Empty)
                var fullStations = timestamps.filter((_, index) => statuses[index] === 'Full');
                var normalStations = timestamps.filter((_, index) => statuses[index] === 'Normal');
                var emptyStations = timestamps.filter((_, index) => statuses[index] === 'Empty');

                // Aggregating stations by hour
                var fullStationsByHour = aggregateStationsByHour(fullStations);
                var normalStationsByHour = aggregateStationsByHour(normalStations);
                var emptyStationsByHour = aggregateStationsByHour(emptyStations);

                // Plotting the graph for Garbage Stations
                var fullTrace = {
                    x: Array.from({ length: 24 }, (_, i) => i), // Time interval 0 to 24 hours
                    y: Array.from({ length: 24 }, (_, i) => fullStationsByHour[i] || 0),
                    type: 'bar',
                    name: 'Full Stations'
                };

                var normalTrace = {
                    x: Array.from({ length: 24 }, (_, i) => i), // Time interval 0 to 24 hours
                    y: Array.from({ length: 24 }, (_, i) => normalStationsByHour[i] || 0),
                    type: 'bar',
                    name: 'Normal Stations'
                };

                var emptyTrace = {
                    x: Array.from({ length: 24 }, (_, i) => i), // Time interval 0 to 24 hours
                    y: Array.from({ length: 24 }, (_, i) => emptyStationsByHour[i] || 0),
                    type: 'bar',
                    name: 'Empty Stations'
                };

                var layout = {
                    title: 'Garbage Stations Status by Hour of the Day',
                    xaxis: { title: 'Hour of the Day', range: [0, 24] }, // Setting the x-axis range to 0-24 hours
                    yaxis: { title: 'Number of Stations' }
                };

                Plotly.newPlot('garbageStationGraph', [fullTrace, normalTrace, emptyTrace], layout);
            });


            // Similar Analysis and Graph Creation for other datasets
            // Attention Data
            // Parked Cars Data
            // Patrol Data
            // Attention Data Analysis and Graph Creation
            loadJSON('./json/fake_attention_data.json', function (response) {
                var attentionData = JSON.parse(response);

                // Extracting emergency types
                var emergencyTypes = attentionData.map(item => item.emergencyType);

                // Counting occurrences of emergency types
                var emergencyTypeCount = {};
                emergencyTypes.forEach(type => {
                    emergencyTypeCount[type] = (emergencyTypeCount[type] || 0) + 1;
                });

                // Creating data for the pie chart
                var pieData = {
                    values: Object.values(emergencyTypeCount),
                    labels: Object.keys(emergencyTypeCount),
                    type: 'pie'
                };

                var pieLayout = {
                    title: 'Emergency Type Distribution'
                };

                Plotly.newPlot('attentionPieChart', [pieData], pieLayout);
            });

            // Parked Cars Data Analysis and Graph Creation
            loadJSON('./json/fake_parked_cars_data.json', function (response) {
                var parkedCarsData = JSON.parse(response);

                // Extracting timestamps and number of cars
                var timestamps = parkedCarsData.map(item => new Date(item.timestamp));
                var carNumbers = parkedCarsData.map(item => item.numberOfCars);

                // Grouping cars by hour
                var carsByHour = {};
                timestamps.forEach((timestamp, index) => {
                    var hour = timestamp.getHours();
                    carsByHour[hour] = (carsByHour[hour] || 0) + carNumbers[index];
                });

                // Plotting the graph for Parked Cars
                var carTrace = {
                    x: Object.keys(carsByHour),
                    y: Object.values(carsByHour),
                    type: 'bar',
                    name: 'Number of Cars'
                };

                var carLayout = {
                    title: 'Parked Cars by Hour of the Day',
                    xaxis: { title: 'Hour of the Day' },
                    yaxis: { title: 'Number of Cars' }
                };

                Plotly.newPlot('parkedCarsGraph', [carTrace], carLayout);
            });

            // Patrol Data Analysis and Graph Creation
            loadJSON('./json/fake_patrol_data.json', function (response) {
                var patrolData = JSON.parse(response);

                // Extracting timestamps
                var timestamps = patrolData.map(item => new Date(item.timestamp));

                // Grouping patrols by hour
                var patrolsByHour = aggregateStationsByHour(timestamps);

                // Plotting the graph for Patrols
                var patrolTrace = {
                    x: Object.keys(patrolsByHour),
                    y: Object.values(patrolsByHour),
                    type: 'bar',
                    name: 'Number of Patrols'
                };

                var patrolLayout = {
                    title: 'Patrols by Hour of the Day',
                    xaxis: { title: 'Hour of the Day' },
                    yaxis: { title: 'Number of Patrols' }
                };

                Plotly.newPlot('patrolGraph', [patrolTrace], patrolLayout);
            });



            loadJSON('./json/fake_census_data.json', function (response) {
                var censusData = JSON.parse(response);

                // Filter residents and non-residents
                var residents = censusData.filter(person => person.permanentResidency === 'Yes');
                var nonResidents = censusData.filter(person => person.permanentResidency === 'No');

                // Count employment status for residents
                var employedResidents = residents.filter(person => person.employmentStatus === 'Employed').length;
                var unemployedResidents = residents.filter(person => person.employmentStatus === 'Unemployed').length;
                var otherResidents = residents.length - employedResidents - unemployedResidents;

                // Count employment status for non-residents
                var employedNonResidents = nonResidents.filter(person => person.employmentStatus === 'Employed').length;
                var unemployedNonResidents = nonResidents.filter(person => person.employmentStatus === 'Unemployed').length;
                var otherNonResidents = nonResidents.length - employedNonResidents - unemployedNonResidents;

                // Plotting the graph for Census Data
                var trace1 = {
                    x: ['Employed', 'Unemployed', 'Other'],
                    y: [employedResidents, unemployedResidents, otherResidents],
                    type: 'bar',
                    name: 'Residents'
                };

                var trace2 = {
                    x: ['Employed', 'Unemployed', 'Other'],
                    y: [employedNonResidents, unemployedNonResidents, otherNonResidents],
                    type: 'bar',
                    name: 'Non-Residents'
                };

                var layout = {
                    title: 'Employment Status Comparison',
                    xaxis: { title: 'Employment Status' },
                    yaxis: { title: 'Number of Individuals' }
                };

                Plotly.newPlot('censusGraph', [trace1, trace2], layout);
            });

        }





        createGraphs();

    </script>
</body>

</html>